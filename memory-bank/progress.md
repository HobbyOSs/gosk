# Progress

## 実装済みの機能
- アセンブラ命令実装のルーチンの定義
  - Pass1での命令実装手順
  - Ocodeの実装手順
  - 機械語生成の実装手順
  - 実装時の注意点の整理
- x86アセンブラの解析
- ASTの生成
- 基本的なコード生成
- `GetOutputSize` 関数の引数に `OutputSizeOptions` 構造体を追加
- PEGを用いた構文解析の最適化
- Pass1の基本的な評価処理
- トークン解析の基本実装
- オペランドの基本実装
- x86のprefix bytes判定機能の実装
  - オペランドサイズプレフィックス(66h)の判定
  - アドレスサイズプレフィックス(67h)の判定
- 機械語サイズ計算機能の完成
  - プレフィックスバイトのサイズ計算を実装
  - オフセットとプレフィックスを含めた正確なサイズ計算
- 算術命令の基本構造の実装開始
  - 共通処理を行うヘルパー関数の実装
  - 各命令の基本的なハンドラー関数の定義

## まだ構築が必要な部分
- 算術命令の完全な実装
  - Ocodeの定義
  - 機械語生成の実装
  - ModR/Mの生成
  - テストケースの修正と有効化
- 高度なコード生成機能
- ユーザーインターフェースの改善
- `asmdb`と`operand`の依存関係の整理と設計修正
- Pass1の評価処理の完全なテストカバレッジ
- トークン解析の最適化と完全性の確保
- オペランド実装の完成度向上
- スタックマシンベースの設計の最適化

## 現在の進捗状況
- 算術命令の実装を開始
  - 基本構造の実装
  - テストの一時的なスキップ
- Pass1の評価処理のテスト強化中
- トークン解析の改善作業進行中
- オペランド実装の改善中
- テストスイートの継続的な拡充
- 機械語サイズ計算機能の実装完了

## 既知の問題
- 算術命令の実装が未完成
  - 機械語生成が未実装
  - ModR/M生成が必要
  - テストケースの修正が必要
- トークン解析の一部ケースで最適化の余地あり
- オペランドの種別判定の精度向上が必要
- スタックマシン関連の構造に改善の余地あり
